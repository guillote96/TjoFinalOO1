Object subclass: #Abonado	instanceVariableNames: 'tarjeta perfiles categoria cantPerfiles'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Abonado methodsFor: 'accessing' stamp: 'Guillermo 1/9/2020 11:20'!categoria ^categoria ! !!Abonado methodsFor: 'accessing' stamp: 'Guillermo 1/15/2020 11:53'!tarjeta  ^tarjeta! !!Abonado methodsFor: 'accessing' stamp: 'Guillermo 1/3/2020 12:01'!tasaDescuento^ categoria tasaDescuento.! !!Abonado methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 13:46'!perfiles ^ perfiles.! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/10/2020 11:45'!categoriaNombre  ^categoria categoria.! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 11:21'!cambiarCatergoria:unaCategoria  categoria:=unaCategoria.! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 16:57'!eliminarPerfil:unPerfil  cantPerfiles > 0 ifTrue:[perfiles remove:unPerfil. cantPerfiles:= cantPerfiles - 1. ^ true].  ^false.  ! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 12:04'!agregarDetalle: unDetalle     tarjeta agregarDetalle: unDetalle.! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 16:50'!agregarPerfil:unPerfil  cantPerfiles < 4 ifTrue:[perfiles add:unPerfil.cantPerfiles:=cantPerfiles +1.^ true].  ^false.  ! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 14:31'!actualizarCategoria   |total|.   total:=0.   total:= perfiles inject:0 into: [:t : actual | t + actual totalConsumoUltimoTresMeses ].   (total < 300) ifTrue:[self cambiarCatergoria: (Plata nuevo). ^ true].   (total >= 300 & total < 500) ifTrue:[self cambiarCatergoria: (Normal nuevo).^true].   (total >= 500) ifTrue:[self cambiarCatergoria: (Oro nuevo).^true].   ^false         ! !!Abonado methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/13/2020 17:12'!seleccionarPerfil:unNombre  ^perfiles detect: [ :perfil | perfil nombre == unNombre ].! !!Abonado methodsFor: 'initialization' stamp: 'Guillermo 1/2/2020 17:25'!initializetarjeta:= Tarjeta new.perfiles:= Set new.categoria:=Plata nuevo.cantPerfiles:= 0.! !!Abonado methodsFor: 'testing' stamp: 'Guillermo 1/6/2020 14:21'!canAddPerfil  ^(cantPerfiles < 4).! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Abonado class	instanceVariableNames: 'singleton'!!Abonado class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 12:16'!nuevo ^ self new initialize.! !!Abonado class methodsFor: 'initialization' stamp: 'Guillermo 1/6/2020 14:53'!resetSingleton	singleton := nil! !!Abonado class methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 13:42'!singleton ^ singleton  ifNil: [ singleton := self nuevo].! !Object subclass: #Categoria	instanceVariableNames: 'tasaDescuento'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Categoria methodsFor: 'initialization' stamp: 'Guillermo 1/2/2020 17:22'!initialize:unaTasa tasaDescuento:=unaTasa.! !!Categoria methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 17:18'!tasaDescuento  ^tasaDescuento.! !!Categoria methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 17:18'!actualizarTasaDescuento:unNumero  tasaDescuento:= unNumero.! !Object subclass: #Consumo	instanceVariableNames: 'fecha recurso'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Consumo methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/13/2020 17:06'!reproducir  recurso reproducir.! !!Consumo methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 11:55'!fecha: unaFecha recurso:unRecursofecha:=unaFecha.recurso:=unRecurso. ! !!Consumo methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 16:37'!recurso ^ recurso! !!Consumo methodsFor: 'accessing' stamp: 'Guillermo 1/3/2020 11:52'!fecha ^ fecha! !!Consumo methodsFor: 'accessing' stamp: 'Guillermo 1/3/2020 11:52'!precio ^ recurso precio! !!Consumo methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 16:23'!nombre  ^ recurso nombre! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Consumo class	instanceVariableNames: ''!!Consumo class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 11:54'!fecha:unaFecha recurso:unRecurso  ^self new fecha:unaFecha recurso:unRecurso.! !Object subclass: #Detalle	instanceVariableNames: 'fecha concepto precio'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Detalle methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 17:06'!fecha:unFecha concepto:unConcepto precio:unPrecio  fecha:=unFecha.  concepto:= unConcepto.  precio:=unPrecio. ! !!Detalle methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 16:14'!fecha ^fecha! !!Detalle methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 16:15'!precio ^precio! !!Detalle methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 16:15'!concepto ^ concepto.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Detalle class	instanceVariableNames: ''!!Detalle class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 17:07'!fecha: unaFecha concepto: unConcepto  precio:unPrecio^self new fecha: unaFecha concepto:unConcepto  precio:unPrecio. ! !Categoria subclass: #Normal	instanceVariableNames: ''	classVariableNames: ''	package: 'TjoFinalNetflix'!!Normal methodsFor: 'accessing' stamp: 'Guillermo 1/10/2020 11:46'!categoria ^'Normal'.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Normal class	instanceVariableNames: ''!!Normal class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 14:28'!nuevo^ self new initialize: 1.! !Categoria subclass: #Oro	instanceVariableNames: ''	classVariableNames: ''	package: 'TjoFinalNetflix'!!Oro methodsFor: 'accessing' stamp: 'Guillermo 1/10/2020 11:46'!categoria^'Oro'.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Oro class	instanceVariableNames: ''!!Oro class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 14:29'!nuevo^ self new initialize: 2.! !Object subclass: #Perfil	instanceVariableNames: 'name consumidos abonado'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Perfil methodsFor: 'initialization' stamp: 'Guillermo 1/3/2020 11:58'!nombre:unNombre abonado:unAbonado name:=unNombre. consumidos:= Bag new. abonado:= unAbonado.! !!Perfil methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 12:11'!agregarRecurso:unRecurso|detalle|   detalle := Detalle fecha:(Date today) concepto:('Compra',' ',unRecurso nombre) precio:(self calcularPrecio: unRecurso).   abonado agregarDetalle: detalle.   consumidos add:(Consumo fecha: (Date today) recurso:(unRecurso)).! !!Perfil methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 13:58'!consumoUltimoTresMeses  ^consumidos select:[:consumo | (consumo fecha) between: ((Date today)addMonths:(-3)) and:(Date today)].! !!Perfil methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/6/2020 13:47'!consumos  ^consumidos ! !!Perfil methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 12:01'!calcularPrecio:unRecurso  ^((abonado tasaDescuento * unRecurso precio) / 100 ) ! !!Perfil methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/13/2020 17:14'!buscarConsumo:unNombre  ^consumidos detect: [ :consumo | consumo nombre == unNombre].! !!Perfil methodsFor: 'accessing' stamp: 'Guillermo 1/3/2020 14:00'!totalConsumoUltimoTresMeses    ^(self consumoUltimoTresMeses ) inject: 0 into:[:total :actual | total + actual precio]. ! !!Perfil methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 16:52'!recursos ^consumidos collect: [ :act | act recurso ].! !!Perfil methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 16:42'!nombre^ name! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Perfil class	instanceVariableNames: ''!!Perfil class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 11:57'!nombre:unNombre abonado:unAbonado  ^self new nombre:unNombre abonado:unAbonado.! !Perfil subclass: #Ninio	instanceVariableNames: ''	classVariableNames: ''	package: 'TjoFinalNetflix'!Categoria subclass: #Plata	instanceVariableNames: ''	classVariableNames: ''	package: 'TjoFinalNetflix'!!Plata methodsFor: 'accessing' stamp: 'Guillermo 1/10/2020 11:45'!categoria ^'Plata'.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Plata class	instanceVariableNames: ''!!Plata class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 17:28'!nuevo^ self new initialize: 100.! !Object subclass: #Recurso	instanceVariableNames: 'nombre precio'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Recurso methodsFor: 'accessing' stamp: 'Guillermo 1/3/2020 15:44'!precio:unPrecio precio:=unPrecio.! !!Recurso methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 15:57'!precio ^precio! !!Recurso methodsFor: 'accessing' stamp: 'Guillermo 1/2/2020 15:57'!nombre ^ nombre! !!Recurso methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 16:33'!nombre:unNombre precio:unPrecio nombre:=unNombre. precio:=unPrecio.! !!Recurso methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 15:45'!remarcarPrecio: tasaInflacion   |precioAux|.   precioAux:= (self precio * tasaInflacion ) / 100. "precio a sumar"   self precio:(self precio + precioAux ).    ! !!Recurso methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/13/2020 17:05'!reproducir! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Recurso class	instanceVariableNames: ''!!Recurso class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 16:34'!nombre:unNombre precio:unPrecio^self new nombre: unNombre precio:unPrecio. ! !Recurso subclass: #Pelicula	instanceVariableNames: ''	classVariableNames: ''	package: 'TjoFinalNetflix'!Recurso subclass: #Serie	instanceVariableNames: ''	classVariableNames: ''	package: 'TjoFinalNetflix'!Object subclass: #Sitio	instanceVariableNames: 'abonados recursos tasaInflacion'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 15:49'!agregarAbonado:unAbonadoabonados add:unAbonado.! !!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 15:41'!remarcarPrecio:tasaInflacion   recursos do: [ :recurso | recurso remarcarPrecio: tasaInflacion ].! !!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/14/2020 11:13'!tasaDeInflacion ^tasaInflacion ! !!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 15:50'!agregarRecurso:unRecurso recursos add:unRecurso.! !!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/3/2020 14:10'!actualizarCategoria:unAbonado  ^unAbonado actualizarCategoria.! !!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/14/2020 11:08'!calcularPrecio:unRecurso perfil:unPerfil  |precioAremarcar|.  precioAremarcar:=((unPerfil calcularPrecio: unRecurso) * self tasaDeInflacion ) / 100.  ^((unPerfil calcularPrecio: unRecurso) + precioAremarcar )! !!Sitio methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/14/2020 11:58'!descargarRecurso:unRecurso perfil:unPerfil  |recursoAux|   recursoAux:= unRecurso copy.   recursoAux precio: (self calcularPrecio: unRecurso  perfil:unPerfil ).   unPerfil agregarRecurso: recursoAux.! !!Sitio methodsFor: 'initialization' stamp: 'Guille 2/3/2020 14:47'!initialize abonados:= Set new. recursos:= Set new.  tasaInflacion:= 0.! !!Sitio methodsFor: 'accessing' stamp: 'Guillermo 1/14/2020 11:14'!tasaInflacion:tasa tasaInflacion:=tasa.  ! !!Sitio methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 15:53'!recursos ^ recursos.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Sitio class	instanceVariableNames: 'singleton'!!Sitio class methodsFor: 'initialization' stamp: 'Guille 2/3/2020 14:55'!resetSingleton	singleton := nil! !!Sitio class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 16:23'!nuevo^ self new initialize.! !!Sitio class methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 15:46'!singleton ^ singleton  ifNil: [ singleton := self nuevo].! !Object subclass: #Tarjeta	instanceVariableNames: 'detalles'	classVariableNames: ''	package: 'TjoFinalNetflix'!!Tarjeta methodsFor: 'accessing' stamp: 'Guillermo 1/15/2020 11:54'!detalles  ^detalles! !!Tarjeta methodsFor: 'initialization' stamp: 'Guillermo 1/2/2020 17:04'!initialize  detalles:= Bag new.! !!Tarjeta methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 16:13'!agregarDetalle:unDetalle  detalles add:unDetalle.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Tarjeta class	instanceVariableNames: ''!!Tarjeta class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/2/2020 17:05'!nueva^self new initialize.! !