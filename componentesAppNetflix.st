WAComponent subclass: #NetflixComponent	instanceVariableNames: ''	classVariableNames: ''	package: 'componentesAppNetflix'!!NetflixComponent methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/9/2020 16:44'!imagenNetflix:html   html tbsImage class: 'imagen';url: 'https://i.ya-webdesign.com/images/netflix-logo-png-black-1.png'.! !!NetflixComponent methodsFor: 'hooks' stamp: 'Guillermo 1/16/2020 11:27'!style    ^ 'table {       text-align:center;      position:center;      margin:auto; }  .titulo,form{     text-align:center;      position:center;      margin:auto;}      .imagen{          width: 210px; height: 98px;       }#video{   text-align:center;      position:center;      margin:auto;}#categoria {  float: right;margin-top:100px;margin-right:20px;}div {margin-right:10px;margin-left: 10px;}#boton{  margin-top:9%; font-size:9px;}#nombre{ font-family: Verdana;}#resumen{     text-align:left;      position:left;      margin:auto;}#divResumen{margin-right:20%;margin-left: 20%;}'! !NetflixComponent subclass: #InicioComponent	instanceVariableNames: 'inicio nombre'	classVariableNames: ''	package: 'componentesAppNetflix'!!InicioComponent methodsFor: 'rendering' stamp: 'Guillermo 1/15/2020 11:53'!renderContentOn: htmlhtml div: [ self imagenNetflix: html.html tbsLabel beWarning id:'categoria'; with:inicio categoriaNombre. html space.html horizontalRule.html heading level2 class:'titulo'; with: 'Perfiles'.html break.self mostrarPerfiles:html.html break.(inicio canAddPerfil )ifTrue: [ self mostrarFormularioPerfil:html ].html horizontalRule.html anchor callback: [inicio actualizarCategoria] ;with:[html tbsButton bePrimary;beSmall;id:'boton';with: 'Actualizar Categoria'].html anchor callback:[self show: (ResumenTarjetaComponent nuevo:(inicio tarjeta))];with:[html tbsButton bePrimary;beSmall;id:'boton';with: 'Resumen tarjeta'].			 ]! !!InicioComponent methodsFor: 'actions' stamp: 'Guillermo 1/6/2020 15:31'!save(self nombre isEmpty)ifFalse: [inicio agregarPerfil: (Perfil nombre:(self nombre) abonado: inicio)].self nombre: nil.! !!InicioComponent methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/10/2020 14:31'!mostrarFormularioPerfil:htmlhtml heading level3 class:'titulo'; with: 'Agregar Perfil'.html break.html form:[            html text: 'Nombre: '.	         html break.	         html textInput on:#nombre of:self.	         html break.	         html break.	         html submitButton callback: [self save]; with:'Guardar'.].! !!InicioComponent methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/9/2020 12:27'!mostrarPerfiles:htmlhtml table with:[ inicio perfiles do:[:perfil | self rederizarPerfil:perfil html:html]].! !!InicioComponent methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/10/2020 14:25'!rederizarPerfil:perfil html:html|prueba|^ html tableRow:[	      html tableData id:'nombre';with: perfil nombre.			html tableData:[html anchor callback:[inicio eliminarPerfil: perfil];with:[html tbsGlyphIcon perform:#iconRemove]].		  html tableData:[html anchor callback:[self show: (PerfilComponent nuevo:perfil)];with:[html tbsGlyphIcon perform:#iconUser]].																		]! !!InicioComponent methodsFor: 'initialization' stamp: 'Guillermo 1/10/2020 14:50'!initialize super initialize.inicio:= Abonado singleton.! !!InicioComponent methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 14:35'!nombre:unNombre  nombre:=unNombre.! !!InicioComponent methodsFor: 'accessing' stamp: 'Guillermo 1/6/2020 14:35'!nombre ^nombre! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!InicioComponent class	instanceVariableNames: ''!!InicioComponent class methodsFor: 'class initialization' stamp: 'Guillermo 1/8/2020 14:46'!initialize| app |   app := WAAdmin register: self asApplicationAt: 'netflix'.app		addLibrary: JQDeploymentLibrary;		addLibrary: TBSDevelopmentLibrary.	^app	! !!InicioComponent class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/6/2020 10:47'!CanBeRoot  ^true.! !!InicioComponent class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/6/2020 10:52'!canBeRoot  ^true.! !NetflixComponent subclass: #PerfilComponent	instanceVariableNames: 'perfil sitio'	classVariableNames: ''	package: 'componentesAppNetflix'!!PerfilComponent methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/8/2020 17:33'!mostrarConsumidas:htmlhtml heading level: 2; with: [html text:'Peliculas/Series Consumidas'.html space .html tbsBadge: (perfil consumos size)].html tbsRow: [ perfil consumos do:[:consumo | self rederizarConsumo:consumo html:html]].! !!PerfilComponent methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/10/2020 14:46'!rederizarRecurso:recurso html:html |texto|  texto:='$',' ',((sitio calcularPrecio: recurso perfil: perfil)truncateTo:0.01) printString. ^ 	 html tbsColumn: [ 				html tbsThumbnail: [ 					html image resourceUrl:'https://www.imagen.com.mx/assets/img/imagen_share.png'. html break.					html paragraph: recurso nombre.					html paragraph: (texto).					html anchor callback:[sitio descargarRecurso: recurso perfil: perfil];with:[html tbsGlyphIcon perform:#iconSave].											html space.					 ]] mediumSize: 3.		! !!PerfilComponent methodsFor: 'as yet unclassified' stamp: 'Guille 2/3/2020 15:10'!mostrarRecursos:html|aux|.aux:= self filtroRecursosConsumidas.html heading level: 2; with: [html text:'Peliculas/Series En Carteleras'.html space .html tbsBadge: aux size]."html table with:[ aux do:[:recurso | self rederizarRecurso:recurso html:html]]."html tbsRow: [ aux do:[:recurso | self rederizarRecurso:recurso html:html] ].! !!PerfilComponent methodsFor: 'as yet unclassified' stamp: 'Guille 2/3/2020 15:01'!rederizarConsumo:consumo html:html |texto|.  texto:='$',' ',(((consumo precio)truncateTo:0.01)) printString. ^ 	html tbsColumn: [ 				html tbsThumbnail: [ 					html image resourceUrl:'https://www.imagen.com.mx/assets/img/imagen_share.png'. html break.					html paragraph: consumo nombre.					"html paragraph: texto."					html anchor callback:[self show: (ReproductorComponent nuevo:consumo perfil:perfil)];with:[html tbsGlyphIcon perform:#iconPlay].					html space.					 ]] mediumSize: 3.		! !!PerfilComponent methodsFor: 'as yet unclassified' stamp: 'Guille 2/3/2020 15:15'!filtroRecursosConsumidas|aux|aux:= Bag new.(sitio recursos) collect:[ :recurso| (perfil recursos anySatisfy:[:consumo | consumo nombre = recurso nombre]) ifFalse:[ aux add:recurso]].^aux.! !!PerfilComponent methodsFor: 'initialization' stamp: 'Guillermo 1/6/2020 15:51'!initialize:unPerfil  perfil:=unPerfil.  sitio:= Sitio singleton.! !!PerfilComponent methodsFor: 'rendering' stamp: 'Guillermo 1/10/2020 14:05'!renderContentOn: htmlhtml div: [  self imagenNetflix: html.html horizontalRule.self mostrarRecursos:html.html horizontalRule.self mostrarConsumidas: html.html horizontalRule.html anchor callback: [self show: (InicioComponent new)];with:'Volver al Home'.].		! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PerfilComponent class	instanceVariableNames: ''!!PerfilComponent class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/6/2020 15:29'!nuevo:unPerfil ^ self new initialize:unPerfil.! !NetflixComponent subclass: #ReproductorComponent	instanceVariableNames: 'recurso sitio perfil'	classVariableNames: ''	package: 'componentesAppNetflix'!!ReproductorComponent methodsFor: 'rendering' stamp: 'Guillermo 1/10/2020 13:57'!renderContentOn: htmlhtml div: [ self imagenNetflix: html.html horizontalRule.html heading level2 class:'titulo'; with: recurso nombre.html div id:'video';with:[ html video 		url: '';		autoplay: true;		controls: true;		loop: true;		preload: true;		width: 500; height: 350;		poster: 'https://www.entramar.mvl.edu.ar/wp-content/uploads/2018/09/Video.jpg';		with: 'Theora decoder not found'. ].html horizontalRule.html anchor callback: [self show: (PerfilComponent nuevo:perfil)];with:'Volver a Perfil'. ]! !!ReproductorComponent methodsFor: 'initialization' stamp: 'Guillermo 1/9/2020 17:07'!recurso:unaSeriePelicula perfil:unPerfil.  recurso:=unaSeriePelicula.  sitio:= Sitio singleton.  perfil:= unPerfil.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ReproductorComponent class	instanceVariableNames: ''!!ReproductorComponent class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/9/2020 16:56'!nuevo:unaSeriePelicula ^ self new initialize:unaSeriePelicula.! !!ReproductorComponent class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/9/2020 17:06'!nuevo:unaSeriePelicula perfil:unPerfil ^ self new recurso:unaSeriePelicula perfil:unPerfil.! !NetflixComponent subclass: #ResumenTarjetaComponent	instanceVariableNames: 'tarjeta'	classVariableNames: ''	package: 'componentesAppNetflix'!!ResumenTarjetaComponent methodsFor: 'initialization' stamp: 'Guillermo 1/15/2020 11:55'!initialize:unaTarjeta tarjeta:=unaTarjeta.! !!ResumenTarjetaComponent methodsFor: 'rendering' stamp: 'Guillermo 1/16/2020 11:32'!renderContentOn: html	|headerBlock  tableBlock nro detallesAux|			headerBlock := [ 			html tableHeading: '#'.			html tableHeading: 'Fecha'.			html tableHeading: 'Conceptos'. 			html tableHeading: 'Precio'.].	nro:=0.	detallesAux:= tarjeta  detalles asSortedCollection: [ :a :b | a fecha >= b fecha ].		tableBlock := [ 			html tableHead: (headerBlock).		html tableBody: [ 			(detallesAux)do: [:row | nro:=nro+1.html tableRow: [ html tableData:(nro).					                                         html tableData:(row fecha).					                                         html tableData:(row concepto).					                                         html tableData:((row precio)truncateTo:0.01).]]]].	html div:[  self imagenNetflix: html.html horizontalRule.	html heading class:'titulo' ;level: 2 ; with: 'Resumen Tarjeta'.	html break.	html div  id:'divResumen';with:[	html tbsTable 			beStriped id:'resumen';			with: tableBlock.			].html horizontalRule.		html anchor callback: [self show: (InicioComponent new)];with:'Volver al Home'.		].			! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ResumenTarjetaComponent class	instanceVariableNames: ''!!ResumenTarjetaComponent class methodsFor: 'as yet unclassified' stamp: 'Guillermo 1/15/2020 11:55'!nuevo:unaTarjeta  ^self new initialize:unaTarjeta.! !InicioComponent initialize!